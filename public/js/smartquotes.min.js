!function(a,b){"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b():a.smartquotes=b()}(this,function(){function a(b){if(void 0===b){var c=function(){a.element(document.body)};if("loading"!==document.readyState)c();else if(document.addEventListener)document.addEventListener("DOMContentLoaded",c,!1);else var d=setInterval(function(){"loading"!==document.readyState&&(clearInterval(d),c())},10)}else{if("string"==typeof b)return a.string(b);if(b instanceof HTMLElement)return a.element(b)}}return a.string=function(a){return a.replace(/'''/g,"‴").replace(/(\W|^)"(\S)/g,"$1“$2").replace(/(\u201c[^"]*)"([^"]*$|[^\u201c"]*\u201c)/g,"$1”$2").replace(/([^0-9])"/g,"$1”").replace(/''/g,"″").replace(/(\W|^)'(\S)/g,"$1‘$2").replace(/([a-z])'([a-z])/gi,"$1’$2").replace(/((\u2018[^']*)|[a-z])'([^0-9]|$)/gi,"$1’$3").replace(/(\u2018)([0-9]{2}[^\u2019]*)(\u2018([^0-9]|$)|$|\u2019[a-z])/gi,"’$2$3").replace(/(\B|^)\u2018(?=([^\u2019]*\u2019\b)*([^\u2019\u2018]*\W[\u2019\u2018]\b|[^\u2019\u2018]*$))/gi,"$1’").replace(/'/g,"′")},a.element=function(b){function d(b){if(-1===["CODE","PRE","SCRIPT","STYLE"].indexOf(b.nodeName)){var e,f,g=b.childNodes,h=[],i="";for(e=0;e<g.length;e++)f=g[e],f.nodeType===c?(h.push([f,i.length]),i+=f.nodeValue):f.childNodes.length&&(i+=d(f));i=a.string(i);for(e in h){var j=h[e];j[0].nodeValue&&(j[0].nodeValue=i.substr(j[1],j[0].nodeValue.length))}return i}}var c=Element.TEXT_NODE||3;return d(b),b},a});
